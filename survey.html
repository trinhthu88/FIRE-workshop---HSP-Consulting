<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>FIRE Survey</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background-color: #f4f4f9;
    }
    .survey-section {
      margin: 20px auto;
      padding: 20px;
      background: #fff;
      max-width: 800px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h2 {
      color: #333;
      text-align: center;
    }
    p {
      font-weight: bold;
    }
    small {
      font-weight: normal;
      color: #555;
    }
    label {
      display: block;
      margin: 8px 0;
    }
    button {
      padding: 10px 15px;
      background-color: #28a745;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin-top: 15px;
      display: block;
      width: 100%;
    }
    button:hover {
      background-color: #218838;
    }
    #result-section {
      margin: 20px auto;
      max-width: 800px;
      padding: 20px;
      background: #e9f5e9;
      border-radius: 8px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
      display: none;
    }
  </style>
</head>
<body>
  <h2>FIRE Survey</h2>
  <div class="survey-section">
    <!-- The form uses your Formspree endpoint -->
    <form id="survey-form" action="https://formspree.io/f/xjkywjvd" method="POST">
      <!-- Hidden fields for contact info -->
      <input type="hidden" name="contactName" id="contactName">
      <input type="hidden" name="contactEmail" id="contactEmail">
      <!-- Formspree setting -->
      <input type="hidden" name="_captcha" value="false">
      
      <!-- Question 1 -->
      <p>1. What's your ideal lifestyle after achieving financial independence?<br>
         <small>Phong cách sống lý tưởng của bạn sau khi đạt được độc lập tài chính là gì?</small>
      </p>
      <label><input type="radio" name="q1" value="A" required> A) Minimalist and frugal / Tối giản và tiết kiệm</label>
      <label><input type="radio" name="q1" value="B"> B) Luxurious with few financial constraints / Sang trọng với ít áp lực về tài chính</label>
      <label><input type="radio" name="q1" value="C"> C) Balance of work and leisure / Cân bằng giữa công việc và giải trí</label>
      <label><input type="radio" name="q1" value="D"> D) Similar to current lifestyle, but without full-time work / Tương tự như lối sống hiện tại, nhưng không làm việc toàn thời gian</label>
      
      <!-- Question 2 -->
      <p>2. How do you feel about work after achieving financial independence?<br>
         <small>Bạn suy nghĩ thế nào về công việc sau khi đạt được độc lập tài chính?</small>
      </p>
      <label><input type="radio" name="q2" value="A" required> A) Prefer not to work at all / Hoàn toàn không thích làm việc</label>
      <label><input type="radio" name="q2" value="B"> B) Might work on passion projects or start a business / Có thể làm theo đam mê hoặc bắt đầu kinh doanh</label>
      <label><input type="radio" name="q2" value="C"> C) Plan to work part-time or seasonally / Dự định làm việc bán thời gian hoặc theo mùa</label>
      <label><input type="radio" name="q2" value="D"> D) Happy to work, but want the option not to / Hạnh phúc làm việc, nhưng muốn có sự lựa chọn không làm việc</label>
      
      <!-- Question 3 -->
      <p>3. What's your target savings rate (percentage of income saved)?<br>
         <small>Mục tiêu tiết kiệm của bạn là bao nhiêu phần trăm thu nhập?</small>
      </p>
      <label><input type="radio" name="q3" value="A" required> A) 70% or higher / 70% hoặc cao hơn</label>
      <label><input type="radio" name="q3" value="B"> B) 50% or higher / 50% hoặc cao hơn</label>
      <label><input type="radio" name="q3" value="C"> C) 40-60% / Từ 40-60%</label>
      <label><input type="radio" name="q3" value="D"> D) 30-50% / Từ 30-50%</label>
      
      <!-- Question 4 -->
      <p>4. How much of your current lifestyle are you willing to sacrifice to reach FI?<br>
         <small>Bạn sẵn sàng hy sinh bao nhiêu trong lối sống hiện tại để đạt được độc lập tài chính?</small>
      </p>
      <label><input type="radio" name="q4" value="A" required> A) Willing to cut back significantly / Sẵn sàng cắt giảm đáng kể</label>
      <label><input type="radio" name="q4" value="B"> B) Not willing to sacrifice current comforts / Không sẵn sàng hy sinh tiện nghi hiện tại</label>
      <label><input type="radio" name="q4" value="C"> C) Willing to make some adjustments / Sẵn sàng điều chỉnh một số thứ</label>
      <label><input type="radio" name="q4" value="D"> D) Aiming for a balance of saving and enjoying life / Hướng tới cân bằng giữa tiết kiệm và tận hưởng cuộc sống</label>
      
      <!-- Question 5 -->
      <p>5. What's your primary motivation for pursuing FIRE?<br>
         <small>Động lực chính khiến bạn theo đuổi mục tiêu FIRE là gì?</small>
      </p>
      <label><input type="radio" name="q5" value="A" required> A) Freedom from financial stress / Loại bỏ căng thẳng tài chính</label>
      <label><input type="radio" name="q5" value="B"> B) Ability to afford premium experiences / Có khả năng chi trả trải nghiệm cao cấp</label>
      <label><input type="radio" name="q5" value="C"> C) Flexibility in work schedule / Linh hoạt trong lịch làm việc</label>
      <label><input type="radio" name="q5" value="D"> D) Security and peace of mind / An toàn và sự yên tâm</label>
      
      <!-- Question 6 -->
      <p>6. How do you plan to spend your time in early retirement?<br>
         <small>Bạn dự định sẽ dành thời gian nghỉ hưu sớm của mình như thế nào?</small>
      </p>
      <label><input type="radio" name="q6" value="A" required> A) Simple pleasures and low-cost activities / Niềm vui đơn giản và hoạt động giá rẻ</label>
      <label><input type="radio" name="q6" value="B"> B) Extensive travel and hobbies / Du lịch và sở thích phong phú</label>
      <label><input type="radio" name="q6" value="C"> C) Mix of leisure and part-time work / Kết hợp thư giãn và làm việc bán thời gian</label>
      <label><input type="radio" name="q6" value="D"> D) Similar to current lifestyle, but with more freedom / Tương tự hiện tại, nhưng với nhiều tự do hơn</label>
      
      <!-- Question 7 -->
      <p>7. What's your ideal living situation in early retirement?<br>
         <small>Môi trường sống lý tưởng của bạn khi nghỉ hưu sớm là gì?</small>
      </p>
      <label><input type="radio" name="q7" value="A" required> A) Small, efficient home or nomadic / Nhà nhỏ tiện nghi hoặc du mục</label>
      <label><input type="radio" name="q7" value="B"> B) Large, comfortable home or multiple properties / Nhà lớn tiện nghi hoặc nhiều bất động sản</label>
      <label><input type="radio" name="q7" value="C"> C) Modest home with travel options / Nhà bình thường, có khả năng du lịch</label>
      <label><input type="radio" name="q7" value="D"> D) Current home or similar / Nhà hiện tại hoặc tương tự</label>
      
      <!-- Question 8 -->
      <p>8. How do you feel about your career?<br>
         <small>Bạn cảm thấy thế nào về sự nghiệp của mình?</small>
      </p>
      <label><input type="radio" name="q8" value="A" required> A) Want to leave as soon as possible / Muốn nghỉ việc càng sớm càng tốt</label>
      <label><input type="radio" name="q8" value="B"> B) Enjoy it, but want the option to leave / Thích, nhưng muốn có lựa chọn nghỉ việc</label>
      <label><input type="radio" name="q8" value="C"> C) Like it, but want to reduce hours/stress / Thích, nhưng muốn giảm giờ làm hoặc căng thẳng</label>
      <label><input type="radio" name="q8" value="D"> D) Generally satisfied, but desire more control / Hài lòng, nhưng mong muốn nhiều quyền kiểm soát hơn</label>
      
      <br><br>
      <button type="submit">Submit Survey</button>
    </form>
  </div>
  
  <div id="result-section">
    <h3>Your Survey Result</h3>
    <div id="result-text"></div>
  </div>
  
  <script>
    // When the page loads, check if contact info exists; if not, redirect to index.html.
    window.onload = function() {
      const contactName = localStorage.getItem('contactName');
      const contactEmail = localStorage.getItem('contactEmail');
      if (!contactName || !contactEmail) {
        alert("Please fill in your contact information on the landing page first.");
        window.location.href = "index.html";
      } else {
        document.getElementById('contactName').value = contactName;
        document.getElementById('contactEmail').value = contactEmail;
      }
    };
    
    // Intercept the form submission: calculate result, display it, then send data via AJAX.
    document.getElementById("survey-form").addEventListener("submit", function(e) {
      e.preventDefault();
      const form = e.target;
      let counts = { A: 0, B: 0, C: 0, D: 0 };
      
      // Loop through questions 1 to 8.
      for (let i = 1; i <= 8; i++) {
        const answer = document.querySelector(`input[name="q${i}"]:checked`);
        if (answer) {
          counts[answer.value]++;
        } else {
          alert("Please answer question " + i);
          return;
        }
      }
      
      // Determine result based on the highest count.
      let maxCount = Math.max(counts.A, counts.B, counts.C, counts.D);
      let winners = Object.keys(counts).filter(letter => counts[letter] === maxCount);
      let resultText = "";
      
      if (winners.length > 1) {
        resultText = `<strong>Equal mix or close scores:</strong> You might resonate with multiple FIRE types. <br><br>
          <em>Lựa chọn nhiều đáp án khác nhau:</em> Bạn có thể cảm thấy phù hợp với nhiều hình thức FIRE. Hãy xem xét một phương pháp kết hợp, lấy các yếu tố từ mỗi hình thức mà bạn thấy phù hợp.`;
      } else {
        switch(winners[0]) {
          case "A":
            resultText = `<strong>Mostly A's:</strong> You align most closely with <strong>LeanFIRE</strong>. You're comfortable with a minimalist lifestyle and are willing to make significant sacrifices to achieve financial independence as quickly as possible.<br><br>
              <em>Lựa chọn nhiều phương án A:</em> Bạn phù hợp nhất với <strong>LeanFIRE</strong>. Bạn thoải mái với lối sống tối giản và sẵn sàng hy sinh đáng kể để đạt được độc lập tài chính càng nhanh càng tốt.`;
            break;
          case "B":
            resultText = `<strong>Mostly B's:</strong> Your preferences match with <strong>FatFIRE</strong>. You're aiming for a luxurious early retirement and are willing to work longer or save more aggressively to achieve a higher standard of living in retirement.<br><br>
              <em>Lựa chọn nhiều phương án B:</em> Sở thích của bạn phù hợp với <strong>FatFIRE</strong>. Bạn đang hướng đến một cuộc sống nghỉ hưu tiện nghi và sẵn sàng làm việc lâu hơn hoặc tiết kiệm nhiều hơn để đạt được một tiêu chuẩn sống cao hơn.`;
            break;
          case "C":
            resultText = `<strong>Mostly C's:</strong> You're most aligned with <strong>BaristaFIRE</strong>. You value a balance between work and leisure, and are comfortable with the idea of part-time work to support a flexible lifestyle in early retirement.<br><br>
              <em>Lựa chọn nhiều phương án C:</em> Bạn phù hợp nhất với <strong>BaristaFIRE</strong>. Bạn đánh giá cao sự cân bằng giữa công việc và thư giãn, và thoải mái với ý tưởng làm việc bán thời gian để hỗ trợ phong cách sống linh hoạt trong kỳ nghỉ hưu sớm.`;
            break;
          case "D":
            resultText = `<strong>Mostly D's:</strong> Your approach is most similar to <strong>CoastFIRE</strong>. You're focused on saving enough early in your career to ensure a comfortable traditional retirement, while enjoying life and potentially scaling back work in the meantime.<br><br>
              <em>Lựa chọn nhiều phương án D:</em> Chiến lược của bạn tương tự nhất với <strong>CoastFIRE</strong>. Bạn tập trung vào việc tiết kiệm đủ sớm trong sự nghiệp để đảm bảo một cuộc nghỉ hưu truyền thống thoải mái, đồng thời tận hưởng cuộc sống và có thể giảm bớt công việc trong thời gian này.`;
            break;
        }
      }
      
      // Display the result on the page.
      document.getElementById("result-section").style.display = "block";
      document.getElementById("result-text").innerHTML = resultText;
      
      // Send the form data via AJAX using Formspree.
      fetch(form.action, {
        method: "POST",
        body: new FormData(form),
        headers: { "Accept": "application/json" }
      }).then(response => {
        if (!response.ok) {
          alert("There was an issue submitting your data.");
        }
      }).catch(error => {
        alert("Submission error.");
      });
    });
  </script>
</body>
</html>
