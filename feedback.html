<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Workshop Feedback Survey</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background-color: #f4f4f9;
    }
    .survey-section {
      margin: 20px auto;
      padding: 20px;
      background: #fff;
      max-width: 800px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h2 {
      text-align: center;
      color: #333;
    }
    p {
      font-weight: bold;
      margin-top: 15px;
    }
    label {
      display: block;
      margin: 8px 0;
    }
    input[type="radio"] {
      margin-right: 8px;
    }
    textarea {
      width: 100%;
      padding: 10px;
      margin: 5px 0;
      border: 1px solid #ccc;
      border-radius: 4px;
      resize: vertical;
    }
    button {
      display: block;
      width: 100%;
      padding: 10px;
      background-color: #28a745;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin-top: 20px;
    }
    button:hover {
      background-color: #218838;
    }
    #result-section {
      text-align: center;
      margin-top: 20px;
      padding: 15px;
      background: #e9f5e9;
      border-radius: 4px;
      display: none;
    }
  </style>
</head>
<body>
  <h2>Workshop Feedback Survey</h2>
  <div class="survey-section">
    <!-- Form uses Formspree endpoint -->
    <form id="feedback-form" action="https://formspree.io/f/xjkywjvd" method="POST">
      <!-- Hidden fields for contact info -->
      <input type="hidden" name="contactName" id="contactName">
      <input type="hidden" name="contactEmail" id="contactEmail">
      <input type="hidden" name="_captcha" value="false">
      
      <!-- Overall Experience -->
      <p>Overall, how satisfied were you with the workshop?</p>
      <label><input type="radio" name="overallSatisfaction" value="Very Satisfied" required> Very Satisfied</label>
      <label><input type="radio" name="overallSatisfaction" value="Satisfied"> Satisfied</label>
      <label><input type="radio" name="overallSatisfaction" value="Neutral"> Neutral</label>
      <label><input type="radio" name="overallSatisfaction" value="Unsatisfied"> Unsatisfied</label>
      <label><input type="radio" name="overallSatisfaction" value="Very Unsatisfied"> Very Unsatisfied</label>
      
      <p>Did the workshop meet your expectations?</p>
      <label><input type="radio" name="expectationsMet" value="Yes" required> Yes</label>
      <label><input type="radio" name="expectationsMet" value="Somewhat"> Somewhat</label>
      <label><input type="radio" name="expectationsMet" value="No"> No</label>
      
      <!-- Content and Delivery -->
      <p>How would you rate the quality of the workshop content?</p>
      <label><input type="radio" name="contentQuality" value="Excellent" required> Excellent</label>
      <label><input type="radio" name="contentQuality" value="Good"> Good</label>
      <label><input type="radio" name="contentQuality" value="Average"> Average</label>
      <label><input type="radio" name="contentQuality" value="Poor"> Poor</label>
      <label><input type="radio" name="contentQuality" value="Very Poor"> Very Poor</label>
      
      <p>Was the material presented in a clear and organized manner?</p>
      <label><input type="radio" name="presentationClarity" value="Yes" required> Yes</label>
      <label><input type="radio" name="presentationClarity" value="No"> No</label>
      
      <p>How relevant was the workshop content to your needs?</p>
      <label><input type="radio" name="contentRelevance" value="Highly Relevant" required> Highly Relevant</label>
      <label><input type="radio" name="contentRelevance" value="Somewhat Relevant"> Somewhat Relevant</label>
      <label><input type="radio" name="contentRelevance" value="Not Very Relevant"> Not Very Relevant</label>
      <label><input type="radio" name="contentRelevance" value="Not Relevant At All"> Not Relevant At All</label>
      
      <!-- Impact and Takeaways -->
      <p>What is the most valuable takeaway you gained from the workshop?</p>
      <textarea name="valuableTakeaway" rows="3" placeholder="Your answer" required></textarea>
      
      <p>How likely are you to apply the concepts or skills you learned?</p>
      <label><input type="radio" name="applyConcepts" value="Very Likely" required> Very Likely</label>
      <label><input type="radio" name="applyConcepts" value="Likely"> Likely</label>
      <label><input type="radio" name="applyConcepts" value="Neutral"> Neutral</label>
      <label><input type="radio" name="applyConcepts" value="Unlikely"> Unlikely</label>
      <label><input type="radio" name="applyConcepts" value="Very Unlikely"> Very Unlikely</label>
      
      <p>How likely are you to recommend this workshop to a colleague or friend?</p>
      <label><input type="radio" name="recommendation" value="10" required> 10</label>
      <label><input type="radio" name="recommendation" value="9"> 9</label>
      <label><input type="radio" name="recommendation" value="8"> 8</label>
      <label><input type="radio" name="recommendation" value="7"> 7</label>
      <label><input type="radio" name="recommendation" value="6"> 6</label>
      <label><input type="radio" name="recommendation" value="5"> 5</label>
      <label><input type="radio" name="recommendation" value="4"> 4</label>
      <label><input type="radio" name="recommendation" value="3"> 3</label>
      <label><input type="radio" name="recommendation" value="2"> 2</label>
      <label><input type="radio" name="recommendation" value="1"> 1</label>
      
      <!-- Suggestions for Improvement -->
      <p>What aspects of the workshop could be improved?</p>
      <textarea name="improvementSuggestions" rows="3" placeholder="Your suggestions" required></textarea>
      
      <p>What additional topics or areas would you like to see covered in future workshops?</p>
      <textarea name="futureTopics" rows="3" placeholder="Your ideas" required></textarea>
      
      <!-- Additional Comments -->
      <p>Any other feedback or comments?</p>
      <textarea name="additionalComments" rows="3" placeholder="Your comments"></textarea>
      
      <button type="submit">Submit Feedback</button>
    </form>
  </div>
  
  <div id="result-section" style="display:none;">
    <h3>Thank you for your feedback!</h3>
  </div>
  
  <script>
    // On load, check for contact info; if not present, redirect.
    window.onload = function() {
      const contactName = localStorage.getItem('contactName');
      const contactEmail = localStorage.getItem('contactEmail');
      if (!contactName || !contactEmail) {
        alert("Please fill in your contact information on the landing page first.");
        window.location.href = "index.html";
      } else {
        document.getElementById('contactName').value = contactName;
        document.getElementById('contactEmail').value = contactEmail;
      }
    };
    
    // Intercept form submission to send data via AJAX.
    document.getElementById("feedback-form").addEventListener("submit", function(e) {
      e.preventDefault();
      const form = e.target;
      fetch(form.action, {
        method: "POST",
        body: new FormData(form),
        headers: { "Accept": "application/json" }
      }).then(response => {
        if (response.ok) {
          form.style.display = "none";
          document.getElementById("result-section").style.display = "block";
        } else {
          alert("There was an issue submitting your feedback. Please try again.");
        }
      }).catch(error => {
        alert("Submission error. Please try again.");
      });
    });
  </script>
</body>
</html>
